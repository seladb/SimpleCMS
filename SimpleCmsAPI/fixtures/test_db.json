[{"model": "contenttypes.contenttype", "pk": 1, "fields": {"app_label": "admin", "model": "logentry"}}, {"model": "contenttypes.contenttype", "pk": 2, "fields": {"app_label": "auth", "model": "permission"}}, {"model": "contenttypes.contenttype", "pk": 3, "fields": {"app_label": "auth", "model": "group"}}, {"model": "contenttypes.contenttype", "pk": 4, "fields": {"app_label": "auth", "model": "user"}}, {"model": "contenttypes.contenttype", "pk": 5, "fields": {"app_label": "contenttypes", "model": "contenttype"}}, {"model": "contenttypes.contenttype", "pk": 6, "fields": {"app_label": "sessions", "model": "session"}}, {"model": "contenttypes.contenttype", "pk": 7, "fields": {"app_label": "SimpleCmsAPI", "model": "blogpost"}}, {"model": "contenttypes.contenttype", "pk": 8, "fields": {"app_label": "SimpleCmsAPI", "model": "user"}}, {"model": "contenttypes.contenttype", "pk": 9, "fields": {"app_label": "SimpleCmsAPI", "model": "comment"}}, {"model": "contenttypes.contenttype", "pk": 10, "fields": {"app_label": "SimpleCmsAPI", "model": "like"}}, {"model": "sessions.session", "pk": "y1nzdlcvew69jcl2up9ilgbcaf1imnwt", "fields": {"session_data": "ZDQ3Y2FhNGRhYmIwMDUyZjQ0N2NiZTc0MWNkN2NhMzBiYTYzZjEwZTp7Il9hdXRoX3VzZXJfaWQiOiIxIiwiX2F1dGhfdXNlcl9iYWNrZW5kIjoiZGphbmdvLmNvbnRyaWIuYXV0aC5iYWNrZW5kcy5Nb2RlbEJhY2tlbmQiLCJfYXV0aF91c2VyX2hhc2giOiJjOGM4Y2Y1ZDIwZGU5NmI3YTczNDExZDQ4YTE4ODdiOWI1YmVkYzk1In0=", "expire_date": "2020-06-29T21:12:44.138Z"}}, {"model": "SimpleCmsAPI.user", "pk": 1, "fields": {"username": "seladb", "first_name": "Elad", "last_name": "B", "joined": "2020-06-15T21:13:10.997Z"}}, {"model": "SimpleCmsAPI.user", "pk": 2, "fields": {"username": "hw", "first_name": "Hello", "last_name": "World", "joined": "2020-06-15T21:13:24.955Z"}}, {"model": "SimpleCmsAPI.user", "pk": 3, "fields": {"username": "cooluser", "first_name": "Cool", "last_name": "User", "joined": "2020-06-15T21:17:38.395Z"}}, {"model": "SimpleCmsAPI.user", "pk": 4, "fields": {"username": "hereiam", "first_name": "Here", "last_name": "Iam", "joined": "2020-06-16T01:05:28.743Z"}}, {"model": "SimpleCmsAPI.user", "pk": 5, "fields": {"username": "omg", "first_name": "Oh", "last_name": "MG", "joined": "2020-06-16T01:05:36.512Z"}}, {"model": "SimpleCmsAPI.blogpost", "pk": 1, "fields": {"title": "PcapPlusPlus reached 1000 GitHub stars", "content": "Medium star\r\nOMG!!\r\n\r\nPcapPlusPlus has just reached 1000 GitHub stars!! \r\n\r\nWhen I started this project 6 years ago I couldn't imagine it'd get so popular!! I'd like to thank all the users, contributors and supporters who helped getting this far! Next goal: 2K stars \r\nGrinning face\r\n\r\nhttps://pcapplusplus.github.io", "writer": 1, "published": "2020-06-15T21:16:04.074Z"}}, {"model": "SimpleCmsAPI.blogpost", "pk": 2, "fields": {"title": "Scaling Your Analytics Schema Using Events Grammar", "content": "One of the most important aspects of building your own analytics system is how you store the data and expose it for querying.\r\nThis post describes the challenges and approach taken when designing the analytics system for dapPulse and later at Wondermall.\r\n\r\nProblem Definition\r\n\r\nMost Analytics software out there lets you define events as an event_name coupled with a bag of data properties.\r\nIt doesn\u2019t scale\u2026\r\n\r\nWhile this approach is simple and works very well for a small number of events, it simply doesn\u2019t scale.\r\nYour events catalog can very quickly grow to a size where it\u2019s very hard to keep track of all the different events and the description of the properties that describe them.\r\nMost companies usually resort to an external document describing the entire catalog. This document then needs to be maintained and updated whenever anyone adds or modifies an event. It rarely gets done\u2026\r\n\r\nComplex schemas\r\n\r\nIn most systems, the properties we send with each event are widely different for each event.\r\nThis means that the schema for saving such data is very sparse.\r\nYou need lots of columns to fit the needs of every event in the system, where each event only uses a small subset of these columns.\r\n\r\nThere are 2 ways this is implemented:\r\n\r\n    \u201cfat table\u201d \u2014 Lots of specific columns where each event uses the ones that fit its needs (a cart_id column is useful for add_to_cart event but not for login event). This makes the schema extremely sparse where every event uses only a small subset of columns \u2014 hard to manage and query.\r\n    You can see an example of such a schema here.\r\n    Generic columns (like value1, value, \u2026) optimize the number of columns used but strip away the information as to what the value represent. value1 can be a Cart id for one event, and Product id for another. You can\u2019t know what the value represents just from looking at the data.\r\n\r\nUsually, both are used. We have specific columns for all the values we know we\u2019ll need, and we keep a number of generic ones as extras just in case we need to send something new that we didn\u2019t think of beforehand.\r\nThe result is a very complex sparse schema that is hard to understand, query, maintain and grow.\r\n\r\nDiscoverability\r\n\r\nHaving such a large complex schema makes looking at the data hard.\r\nSuppose we look at an event row.\r\nWe know what kind of event it is by the event\u2019s name. But then we have tens of other columns to look at. Some are relevant, some are not\u2026. some are generic \u2014 who knows what is the value in value1 column stands for?\r\n\r\nThis kind of schema makes it extremely hard to just browse data and know what you\u2019re looking at without the help of an external (usually outdated) event catalog spec document.\r\n\r\nBuilding an Event Grammar\r\n\r\nWith the above in mind, when thinking of designing a new analytics system I wanted to build something different that tackles the issues Ive experienced in previous systems.\r\nI\u2019ve read about the \u201cevent grammar\u201d approach on the snowplow blog (here and here) and immediately liked it as it seemed to solve all my woes.\r\n\r\nBasically, in the \u201cevent grammar\u201d approach we model our event data the same way we model an English sentence:\r\n\r\nTo translate this to an actual schema, we describe each object \u2014 Subject, Direct\\Indirect\\Prepositional \u2014 using 3 fields:\r\n\r\n    type \u2014 the object\u2019s type (for ex: Store)\r\n    key \u2014 a unique identifier identifying the specific object instance we\u2019re referring (For ex: a store database id)\r\n    display (optional) \u2014 A nice display string for the objected we\u2019re referring to.\r\n\r\nFor example, the event User added Product to Cart would be:\r\n\r\nUser<123, \u201cJohn D.\u201d> add Product<\"a12\", \"Scissors\"> to Cart<212>\r\n\r\nOur Subject is \u201cJohn D.\u201d \u2014 a User who\u2019s id is 123.\r\nThe verb is add\r\nOur Direct Object is Scissors \u2014 a Product with id a12\r\nOur Indirect Object is a Cart who\u2019s id is 212", "writer": 3, "published": "2020-06-15T21:20:58.826Z"}}, {"model": "SimpleCmsAPI.like", "pk": 1, "fields": {"added_by": 1, "blog_post": 2, "added": "2020-06-15T21:54:04.050Z"}}, {"model": "SimpleCmsAPI.like", "pk": 2, "fields": {"added_by": 2, "blog_post": 2, "added": "2020-06-15T22:18:32.730Z"}}, {"model": "SimpleCmsAPI.like", "pk": 3, "fields": {"added_by": 3, "blog_post": 1, "added": "2020-06-15T22:19:15.967Z"}}, {"model": "SimpleCmsAPI.like", "pk": 8, "fields": {"added_by": 1, "blog_post": 1, "added": "2020-06-16T01:02:13.342Z"}}, {"model": "SimpleCmsAPI.like", "pk": 9, "fields": {"added_by": 5, "blog_post": 1, "added": "2020-06-16T01:05:50.865Z"}}, {"model": "SimpleCmsAPI.comment", "pk": 1, "fields": {"added_by": 2, "blog_post": 1, "added": "2020-06-15T21:16:43.154Z", "text": "Way to go!!"}}, {"model": "SimpleCmsAPI.comment", "pk": 2, "fields": {"added_by": 3, "blog_post": 1, "added": "2020-06-15T21:40:34.099Z", "text": "To the next 1000!!!"}}, {"model": "SimpleCmsAPI.comment", "pk": 3, "fields": {"added_by": 1, "blog_post": 2, "added": "2020-06-15T22:22:04.938Z", "text": "Nice post!"}}, {"model": "SimpleCmsAPI.comment", "pk": 4, "fields": {"added_by": 4, "blog_post": 1, "added": "2020-06-16T01:12:08.647Z", "text": "very nice post!!!"}}, {"model": "auth.permission", "pk": 1, "fields": {"name": "Can add log entry", "content_type": 1, "codename": "add_logentry"}}, {"model": "auth.permission", "pk": 2, "fields": {"name": "Can change log entry", "content_type": 1, "codename": "change_logentry"}}, {"model": "auth.permission", "pk": 3, "fields": {"name": "Can delete log entry", "content_type": 1, "codename": "delete_logentry"}}, {"model": "auth.permission", "pk": 4, "fields": {"name": "Can view log entry", "content_type": 1, "codename": "view_logentry"}}, {"model": "auth.permission", "pk": 5, "fields": {"name": "Can add permission", "content_type": 2, "codename": "add_permission"}}, {"model": "auth.permission", "pk": 6, "fields": {"name": "Can change permission", "content_type": 2, "codename": "change_permission"}}, {"model": "auth.permission", "pk": 7, "fields": {"name": "Can delete permission", "content_type": 2, "codename": "delete_permission"}}, {"model": "auth.permission", "pk": 8, "fields": {"name": "Can view permission", "content_type": 2, "codename": "view_permission"}}, {"model": "auth.permission", "pk": 9, "fields": {"name": "Can add group", "content_type": 3, "codename": "add_group"}}, {"model": "auth.permission", "pk": 10, "fields": {"name": "Can change group", "content_type": 3, "codename": "change_group"}}, {"model": "auth.permission", "pk": 11, "fields": {"name": "Can delete group", "content_type": 3, "codename": "delete_group"}}, {"model": "auth.permission", "pk": 12, "fields": {"name": "Can view group", "content_type": 3, "codename": "view_group"}}, {"model": "auth.permission", "pk": 13, "fields": {"name": "Can add user", "content_type": 4, "codename": "add_user"}}, {"model": "auth.permission", "pk": 14, "fields": {"name": "Can change user", "content_type": 4, "codename": "change_user"}}, {"model": "auth.permission", "pk": 15, "fields": {"name": "Can delete user", "content_type": 4, "codename": "delete_user"}}, {"model": "auth.permission", "pk": 16, "fields": {"name": "Can view user", "content_type": 4, "codename": "view_user"}}, {"model": "auth.permission", "pk": 17, "fields": {"name": "Can add content type", "content_type": 5, "codename": "add_contenttype"}}, {"model": "auth.permission", "pk": 18, "fields": {"name": "Can change content type", "content_type": 5, "codename": "change_contenttype"}}, {"model": "auth.permission", "pk": 19, "fields": {"name": "Can delete content type", "content_type": 5, "codename": "delete_contenttype"}}, {"model": "auth.permission", "pk": 20, "fields": {"name": "Can view content type", "content_type": 5, "codename": "view_contenttype"}}, {"model": "auth.permission", "pk": 21, "fields": {"name": "Can add session", "content_type": 6, "codename": "add_session"}}, {"model": "auth.permission", "pk": 22, "fields": {"name": "Can change session", "content_type": 6, "codename": "change_session"}}, {"model": "auth.permission", "pk": 23, "fields": {"name": "Can delete session", "content_type": 6, "codename": "delete_session"}}, {"model": "auth.permission", "pk": 24, "fields": {"name": "Can view session", "content_type": 6, "codename": "view_session"}}, {"model": "auth.permission", "pk": 25, "fields": {"name": "Can add blog post", "content_type": 7, "codename": "add_blogpost"}}, {"model": "auth.permission", "pk": 26, "fields": {"name": "Can change blog post", "content_type": 7, "codename": "change_blogpost"}}, {"model": "auth.permission", "pk": 27, "fields": {"name": "Can delete blog post", "content_type": 7, "codename": "delete_blogpost"}}, {"model": "auth.permission", "pk": 28, "fields": {"name": "Can view blog post", "content_type": 7, "codename": "view_blogpost"}}, {"model": "auth.permission", "pk": 29, "fields": {"name": "Can add user", "content_type": 8, "codename": "add_user"}}, {"model": "auth.permission", "pk": 30, "fields": {"name": "Can change user", "content_type": 8, "codename": "change_user"}}, {"model": "auth.permission", "pk": 31, "fields": {"name": "Can delete user", "content_type": 8, "codename": "delete_user"}}, {"model": "auth.permission", "pk": 32, "fields": {"name": "Can view user", "content_type": 8, "codename": "view_user"}}, {"model": "auth.permission", "pk": 33, "fields": {"name": "Can add comment", "content_type": 9, "codename": "add_comment"}}, {"model": "auth.permission", "pk": 34, "fields": {"name": "Can change comment", "content_type": 9, "codename": "change_comment"}}, {"model": "auth.permission", "pk": 35, "fields": {"name": "Can delete comment", "content_type": 9, "codename": "delete_comment"}}, {"model": "auth.permission", "pk": 36, "fields": {"name": "Can view comment", "content_type": 9, "codename": "view_comment"}}, {"model": "auth.permission", "pk": 37, "fields": {"name": "Can add like", "content_type": 10, "codename": "add_like"}}, {"model": "auth.permission", "pk": 38, "fields": {"name": "Can change like", "content_type": 10, "codename": "change_like"}}, {"model": "auth.permission", "pk": 39, "fields": {"name": "Can delete like", "content_type": 10, "codename": "delete_like"}}, {"model": "auth.permission", "pk": 40, "fields": {"name": "Can view like", "content_type": 10, "codename": "view_like"}}, {"model": "auth.user", "pk": 1, "fields": {"password": "pbkdf2_sha256$180000$d0y5FnRNt33J$roz6kUFYr+pWE93zIK4madABqL1knDiwGoySBFPoGjs=", "last_login": "2020-06-15T21:12:44.076Z", "is_superuser": true, "username": "admin", "first_name": "", "last_name": "", "email": "admin@admin.com", "is_staff": true, "is_active": true, "date_joined": "2020-06-15T21:12:31.807Z", "groups": [], "user_permissions": []}}, {"model": "admin.logentry", "pk": 1, "fields": {"action_time": "2020-06-15T21:13:10.998Z", "user": 1, "content_type": 8, "object_id": "1", "object_repr": "Elad Bichman", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 2, "fields": {"action_time": "2020-06-15T21:13:24.956Z", "user": 1, "content_type": 8, "object_id": "2", "object_repr": "Yael Bichman", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 3, "fields": {"action_time": "2020-06-15T21:16:04.076Z", "user": 1, "content_type": 7, "object_id": "1", "object_repr": "PcapPlusPlus reached...", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 4, "fields": {"action_time": "2020-06-15T21:16:43.155Z", "user": 1, "content_type": 9, "object_id": "1", "object_repr": "Way to go!!", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 5, "fields": {"action_time": "2020-06-15T21:17:38.397Z", "user": 1, "content_type": 8, "object_id": "3", "object_repr": "Eran Kampf", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 6, "fields": {"action_time": "2020-06-15T21:20:58.828Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analyti...", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 7, "fields": {"action_time": "2020-06-15T21:40:34.099Z", "user": 1, "content_type": 7, "object_id": "1", "object_repr": "PcapPlusPlus reached 1000 GitHub stars", "action_flag": 2, "change_message": "[{\"added\": {\"name\": \"comment\", \"object\": \"To the next 1000!!!\"}}]"}}, {"model": "admin.logentry", "pk": 8, "fields": {"action_time": "2020-06-15T21:54:04.051Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analytics Schema Using Even...", "action_flag": 2, "change_message": "[{\"added\": {\"name\": \"like\", \"object\": \"bla\"}}]"}}, {"model": "admin.logentry", "pk": 9, "fields": {"action_time": "2020-06-15T22:18:32.731Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analytics Schema Using Even...", "action_flag": 2, "change_message": "[{\"added\": {\"name\": \"like\", \"object\": \"bla\"}}]"}}, {"model": "admin.logentry", "pk": 10, "fields": {"action_time": "2020-06-15T22:19:15.967Z", "user": 1, "content_type": 7, "object_id": "1", "object_repr": "PcapPlusPlus reached 1000 GitHub stars", "action_flag": 2, "change_message": "[{\"added\": {\"name\": \"like\", \"object\": \"bla\"}}]"}}, {"model": "admin.logentry", "pk": 11, "fields": {"action_time": "2020-06-15T22:22:04.938Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analytics Schema Using Even...", "action_flag": 2, "change_message": "[{\"added\": {\"name\": \"comment\", \"object\": \"Nice post!\"}}]"}}, {"model": "admin.logentry", "pk": 12, "fields": {"action_time": "2020-06-15T23:56:20.448Z", "user": 1, "content_type": 7, "object_id": "3", "object_repr": "hello", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 13, "fields": {"action_time": "2020-06-16T00:11:56.838Z", "user": 1, "content_type": 7, "object_id": "6", "object_repr": "hello", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 14, "fields": {"action_time": "2020-06-16T00:11:56.945Z", "user": 1, "content_type": 7, "object_id": "5", "object_repr": "hello", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 15, "fields": {"action_time": "2020-06-16T00:11:57.021Z", "user": 1, "content_type": 7, "object_id": "4", "object_repr": "hello", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 16, "fields": {"action_time": "2020-06-16T00:59:33.938Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analytics Schema Using Even...", "action_flag": 2, "change_message": "[{\"deleted\": {\"name\": \"like\", \"object\": \"Blog post: 2 liked by: seladb\"}}]"}}, {"model": "admin.logentry", "pk": 17, "fields": {"action_time": "2020-06-16T01:00:55.405Z", "user": 1, "content_type": 7, "object_id": "2", "object_repr": "Scaling Your Analytics Schema Using Even...", "action_flag": 2, "change_message": "[{\"deleted\": {\"name\": \"like\", \"object\": \"Blog post: 2 liked by: seladb\"}}, {\"deleted\": {\"name\": \"like\", \"object\": \"Blog post: 2 liked by: seladb\"}}, {\"deleted\": {\"name\": \"like\", \"object\": \"Blog post: 2 liked by: seladb\"}}]"}}, {"model": "admin.logentry", "pk": 18, "fields": {"action_time": "2020-06-16T01:05:28.744Z", "user": 1, "content_type": 8, "object_id": "4", "object_repr": "Inbar Bichman", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 19, "fields": {"action_time": "2020-06-16T01:05:36.513Z", "user": 1, "content_type": 8, "object_id": "5", "object_repr": "Or Bichman", "action_flag": 1, "change_message": "[{\"added\": {}}]"}}, {"model": "admin.logentry", "pk": 20, "fields": {"action_time": "2020-06-16T01:13:31.088Z", "user": 1, "content_type": 7, "object_id": "1", "object_repr": "PcapPlusPlus reached 1000 GitHub stars", "action_flag": 2, "change_message": "[{\"deleted\": {\"name\": \"comment\", \"object\": \"very nice post!!!\"}}]"}}, {"model": "admin.logentry", "pk": 21, "fields": {"action_time": "2020-06-17T06:02:21.296Z", "user": 1, "content_type": 8, "object_id": "6", "object_repr": " ", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 22, "fields": {"action_time": "2020-06-17T06:03:23.086Z", "user": 1, "content_type": 8, "object_id": "7", "object_repr": " ", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 23, "fields": {"action_time": "2020-06-17T06:09:21.698Z", "user": 1, "content_type": 8, "object_id": "8", "object_repr": " ", "action_flag": 3, "change_message": ""}}, {"model": "admin.logentry", "pk": 24, "fields": {"action_time": "2020-06-17T08:08:12.496Z", "user": 1, "content_type": 8, "object_id": "3", "object_repr": "Cool User", "action_flag": 2, "change_message": "[{\"changed\": {\"fields\": [\"Username\", \"First name\", \"Last name\"]}}]"}}, {"model": "admin.logentry", "pk": 25, "fields": {"action_time": "2020-06-17T08:08:20.719Z", "user": 1, "content_type": 8, "object_id": "1", "object_repr": "Elad B", "action_flag": 2, "change_message": "[{\"changed\": {\"fields\": [\"Last name\"]}}]"}}, {"model": "admin.logentry", "pk": 26, "fields": {"action_time": "2020-06-17T08:08:28.720Z", "user": 1, "content_type": 8, "object_id": "2", "object_repr": "Yael Bichman", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 27, "fields": {"action_time": "2020-06-17T08:08:32.273Z", "user": 1, "content_type": 8, "object_id": "3", "object_repr": "Cool User", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 28, "fields": {"action_time": "2020-06-17T08:08:36.118Z", "user": 1, "content_type": 8, "object_id": "5", "object_repr": "Or Bichman", "action_flag": 2, "change_message": "[]"}}, {"model": "admin.logentry", "pk": 29, "fields": {"action_time": "2020-06-17T08:08:47.824Z", "user": 1, "content_type": 8, "object_id": "2", "object_repr": "Hello World", "action_flag": 2, "change_message": "[{\"changed\": {\"fields\": [\"Username\", \"First name\", \"Last name\"]}}]"}}, {"model": "admin.logentry", "pk": 30, "fields": {"action_time": "2020-06-17T08:09:04.814Z", "user": 1, "content_type": 8, "object_id": "5", "object_repr": "Oh MG", "action_flag": 2, "change_message": "[{\"changed\": {\"fields\": [\"Username\", \"First name\", \"Last name\"]}}]"}}, {"model": "admin.logentry", "pk": 31, "fields": {"action_time": "2020-06-17T08:09:54.431Z", "user": 1, "content_type": 8, "object_id": "4", "object_repr": "Here Iam", "action_flag": 2, "change_message": "[{\"changed\": {\"fields\": [\"Username\", \"First name\", \"Last name\"]}}]"}}]